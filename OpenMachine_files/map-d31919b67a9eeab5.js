(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[538],{57330:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/map",function(){return n(20277)}])},20277:function(t,e,n){"use strict";n.r(e),n.d(e,{ContactMap:function(){return s},__N_SSP:function(){return l},default:function(){return r}});var o=n(5678),a=n(16333),c=n(97091),i=n(91691),l=!0;function r(t){let[e,n]=(0,c.useState)(!1),[l,r]=(0,c.useState)(!1),{findSoloDomain:u}=(0,i.o5)();async function d(){let t=new URL(document.referrer).hostname;if(!t)return!1;let e="localhost"===t||"main.soloist.ai"===t||"soloist.ai"===t;if(e)return console.log("Allowing access to ".concat(t)),!0;try{let e=await u(t);console.log("Parent domain:",e);let n=!!(e&&e.state===a.WebsiteDomainState.Connected);return console.log("Access to ".concat(t," is ").concat(n?"allowed":"not allowed")),n}catch(e){return console.error("Error checking domain ".concat(t,": ").concat(e),e),!1}}return((0,c.useEffect)(()=>{(async()=>{let t=window.self!==window.top,e=window.location.hostname,o=t&&("soloist.ai"===e||"main.soloist.ai"===e||"localhost"===e)&&await d();console.log("iFrame hostname ".concat(e," is ").concat(o?"allowed":"not allowed")),n(o),r(!0)})()},[]),!t.error&&l&&e)?(0,o.jsx)(s,{...t}):null}function s(t){let{address:e,latitude:n,longitude:a,markerTitle:i}=t,[l,r]=(0,c.useState)(),[s,u]=(0,c.useState)();async function d(){window.initMap||(window.initMap=w);let t="google-maps-script",e=document.querySelector('script[id="'.concat(t,'"]'));if(e&&!l&&w(n,a),!e){let e=document.createElement("script");e.id=t,e.src=await p(n,a),e.async=!0,e.defer=!0,document.head.appendChild(e)}}async function p(t,e){let n=await fetch("/api/location/maps",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({latitude:t||0,longitude:e||0,callbackFunctionName:"initMap"})}),o=await n.json();if(!n.ok)throw Error(o);return o.url}function w(t,n){let o=window.google.maps,a=t&&n?{lat:t,lng:n}:{lat:37.7857705,lng:-122.5091086},c=new o.Map(document.getElementById("map"),{center:a,zoom:12,mapTypeControl:!1,scrollwheel:!1,mapId:"SOLO_DEFAULT_MAP"});r(c);let l=new o.marker.AdvancedMarkerElement({position:a,map:c,title:i}),s="https://www.google.com/maps/dir//".concat(encodeURIComponent(i),",").concat(encodeURIComponent(e));l.addListener("click",()=>window.open(s,"_blank")),u(l)}return(0,c.useEffect)(()=>{d()},[]),(0,c.useEffect)(()=>{if(!l||!n||!a)return;let t={lat:n,lng:a};l.setCenter(t),s&&(s.position=t)},[l,s,n,a]),(0,c.useEffect)(()=>{s&&(s.title=i)},[i,s]),(0,o.jsx)("div",{id:"map",style:{position:"absolute",top:0,left:0,right:0,bottom:0}})}}},function(t){t.O(0,[774,888,179],function(){return t(t.s=57330)}),_N_E=t.O()}]);